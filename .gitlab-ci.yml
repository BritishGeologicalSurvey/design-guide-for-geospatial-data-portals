stages:
  - publish

cache:
  # Required to keep artifacts from old builds, e.g. from master
  paths:
    - public

pages:
  stage: publish
  script:
  - mkdir .public
  - mkdir -p public/$CI_COMMIT_REF_NAME/
  - cp -r docs/. public/$CI_COMMIT_REF_NAME/
  - mv .public/$CI_COMMIT_REF_NAME/ public
  artifacts:
    name: "$CI_COMMIT_REF_NAME"
    paths:
    - public
  when: always